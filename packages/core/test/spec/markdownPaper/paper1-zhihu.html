<div class="RichText ztext Post-RichText"><p>作者：<b>灵魂画师牧码</b></p>
    <blockquote> 本文提到的 Markdown Nice 体验地址：<b><a href="https://link.zhihu.com/?target=https%3A//mdnice.com"
                                                class=" external" target="_blank" rel="nofollow noreferrer"
                                                data-za-detail-view-id="1043"><span
            class="invisible">https://</span><span class="visible">mdnice.com</span><span class="invisible"></span></a></b><br>
    </blockquote>
    <p>公元 2019 年，微信公众号排版能力孱弱，始终为运营者所诟病，秀米、135 编辑器等工具割据一方。</p>
    <p>但无论是微信原生工具，还是其他编辑器，都让创作者不得不将有限的创作经历分散到排版设计上。</p>
    <p><b>Markdown</b> 解决排版的灵丹妙药，应运而生。</p>
    <h2>一、引子</h2>
    <h3>1.1 Markdown 是什么？</h3>
    <p>Markdown 是一种排版语法，拥有极简的输入方式和极低的学习成本。</p>
    <p>富含了标题、引用、加粗、链接、图片、代码段、公式等一切在文字创作中需要的排版格式。</p>
    <blockquote> 拥有它，让人专注于内容本身，而不被格式所打扰。<br></blockquote>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic1.zhimg.com/v2-f3339df6dfe6015afa1c90aee7901a68_b.gif" data-caption=""
                       data-size="normal" data-rawwidth="270" data-rawheight="270"
                       data-thumbnail="https://pic1.zhimg.com/v2-f3339df6dfe6015afa1c90aee7901a68_b.jpg"
                       class="content_image" width="270"/></noscript>
        <div class="RichText-gifPlaceholder">
            <div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif"
                                                                                                     role="presentation"
                                                                                                     src="https://pic1.zhimg.com/v2-f3339df6dfe6015afa1c90aee7901a68_b.jpg"
                                                                                                     data-thumbnail="https://pic1.zhimg.com/v2-f3339df6dfe6015afa1c90aee7901a68_b.jpg"
                                                                                                     data-size="normal">
                <svg width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon">
                    <g fill="none" fill-rule="evenodd">
                        <ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"></ellipse>
                        <ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"></ellipse>
                        <svg x="16" y="18.5" class="GifPlayer-icon">
                            <path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z"
                                  fill="#fff"></path>
                        </svg>
                    </g>
                </svg>
            </div>
        </div>
    </figure>
    <p class="ztext-empty-paragraph"><br></p>
    <h3>1.2 怎么和微信公众号结合？</h3>
    <p>这么优秀的排版语法，可是微信公众号也不支持呀。</p>
    <blockquote><b>别急！Markdown Nice 来帮你解决问题！</b><br></blockquote>
    <h3>1.3 Markdown Nice 是什么？</h3>
    <p>一款开源 Markdown 编辑器，写完后即排版成功，复制即可粘贴到微信公众号。</p>
    <p><b>So what？ 只有这点么？</b></p>
    <p><b>当然不是！Nice宝宝你还有什么特性呀？</b></p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-548c5817adc5dcef8d5ca6796384cd43_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="225" data-rawheight="225" class="content_image" width="225"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='225' height='225'></svg>"
             data-caption="" data-size="normal" data-rawwidth="225" data-rawheight="225" class="content_image lazy"
             width="225" data-actualsrc="https://pic4.zhimg.com/v2-548c5817adc5dcef8d5ca6796384cd43_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <ul>
        <li>支持图床、脚注、代码、公式</li>
        <li>支持 8 种排版主题和 7 种代码主题</li>
        <li>支持自定义样式，可提交主题供人瞻仰</li>
        <li>除了公众号外，还支持知乎、掘金、博客园和CSDN等平台</li>
        <li><b>我颜值高呀</b></li>
    </ul>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-4829c03ba3577e87e31b29e16b383c46_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="2880" data-rawheight="1578"
                       class="origin_image zh-lightbox-thumb" width="2880"
                       data-original="https://pic3.zhimg.com/v2-4829c03ba3577e87e31b29e16b383c46_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='2880' height='1578'></svg>"
             data-caption="" data-size="normal" data-rawwidth="2880" data-rawheight="1578"
             class="origin_image zh-lightbox-thumb lazy" width="2880"
             data-original="https://pic3.zhimg.com/v2-4829c03ba3577e87e31b29e16b383c46_r.jpg"
             data-actualsrc="https://pic3.zhimg.com/v2-4829c03ba3577e87e31b29e16b383c46_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>这么多优秀的特性摆在你面前，还在等什么？</p>
    <p>地址：<code>https://mdnice.com</code></p>
    <p><b>快让你的微信排版 Nice 起来！</b></p>
    <h2>二、正文</h2>
    <p>~~没想到你还在看~~</p>
    <p>咳咳、、、</p>
    <p>不要小看Nice宝宝我，为了能够使用 Markdown 进行公众号排版，我可是和微信公众号编辑器做了半年的斗争，才赢得了现在的战果！</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-5c9f61feee2ddef80b41552229606e3b_b.gif" data-caption=""
                       data-size="normal" data-rawwidth="300" data-rawheight="300"
                       data-thumbnail="https://pic4.zhimg.com/v2-5c9f61feee2ddef80b41552229606e3b_b.jpg"
                       class="content_image" width="300"/></noscript>
        <div class="RichText-gifPlaceholder">
            <div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif"
                                                                                                     role="presentation"
                                                                                                     src="https://pic4.zhimg.com/v2-5c9f61feee2ddef80b41552229606e3b_b.jpg"
                                                                                                     data-thumbnail="https://pic4.zhimg.com/v2-5c9f61feee2ddef80b41552229606e3b_b.jpg"
                                                                                                     data-size="normal">
                <svg width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon">
                    <g fill="none" fill-rule="evenodd">
                        <ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"></ellipse>
                        <ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"></ellipse>
                        <svg x="16" y="18.5" class="GifPlayer-icon">
                            <path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z"
                                  fill="#fff"></path>
                        </svg>
                    </g>
                </svg>
            </div>
        </div>
    </figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>想听听我是如何战斗的？下面且听我娓娓道来！</p>
    <h3>2.1 战斗序章</h3>
    <p>微信公众号编辑器源于百度 FEX 前端团队的开源的 <a href="https://link.zhihu.com/?target=http%3A//ueditor.baidu.com/"
                                    class=" wrap external" target="_blank" rel="nofollow noreferrer">ueditor</a>
        项目，这可是宝宝我扒取了网页代码发现的，如图所示：</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic1.zhimg.com/v2-36af28221ee544dd0a48ea2b37743c70_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="1922" data-rawheight="452"
                       class="origin_image zh-lightbox-thumb" width="1922"
                       data-original="https://pic1.zhimg.com/v2-36af28221ee544dd0a48ea2b37743c70_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1922' height='452'></svg>"
             data-caption="" data-size="normal" data-rawwidth="1922" data-rawheight="452"
             class="origin_image zh-lightbox-thumb lazy" width="1922"
             data-original="https://pic1.zhimg.com/v2-36af28221ee544dd0a48ea2b37743c70_r.jpg"
             data-actualsrc="https://pic1.zhimg.com/v2-36af28221ee544dd0a48ea2b37743c70_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>因为 ueditor 是富文本编辑器，所以我即将面临的是 <code>markdown-&gt;富文本</code> 的转换战役，在开源界或者软件界这种转换战役有了相当多的优秀实现。比如：</p>
    <ul>
        <li>Web端：<a href="https://link.zhihu.com/?target=https%3A//github.com/pandao/editor.md" class=" wrap external"
                    target="_blank" rel="nofollow noreferrer">editor.md</a>、<a
                href="https://link.zhihu.com/?target=https%3A//github.com/hinesboy/mavonEditor" class=" wrap external"
                target="_blank" rel="nofollow noreferrer">mavonEditor</a></li>
        <li>PC端：<a href="https://link.zhihu.com/?target=https%3A//typora.io/" class=" wrap external" target="_blank"
                   rel="nofollow noreferrer">typora</a>、<a href="https://link.zhihu.com/?target=https%3A//zh.mweb.im/"
                                                           class=" wrap external" target="_blank"
                                                           rel="nofollow noreferrer">MWeb</a></li>
    </ul>
    <p>但是上述工具都存在一个问题，没有很好地将 <b>CSS 样式</b>融入富文本中，进而适配微信编辑器，以至于国内其他各大平台的富文本编辑器。</p>
    <p>那么有没有尝试弥补这一问题的工具呢？其实是有的：</p>
    <ul>
        <li>Web端：<a href="https://link.zhihu.com/?target=http%3A//md.aclickall.com/" class=" wrap external"
                    target="_blank" rel="nofollow noreferrer">md2all</a>、<a
                href="https://link.zhihu.com/?target=https%3A//github.com/lyricat/wechat-format" class=" wrap external"
                target="_blank" rel="nofollow noreferrer">wechat-format</a></li>
        <li>浏览器插件：<a href="https://link.zhihu.com/?target=https%3A//markdown-here.com/" class=" wrap external"
                     target="_blank" rel="nofollow noreferrer">markdown-here</a></li>
    </ul>
    <blockquote> 但是上述工具也各自有不完美的地方，于是Nice宝宝我发现了这个契机，把自己生产了出来，解决一切不完美！<br></blockquote>
    <p>Markdown Nice 是一个开源项目，由很多开源技术合体而成，其中主要包括：</p>
    <ul>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/facebook/react" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">React</a>：facebook 开源的 js 视图层框架
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/markdown-it/markdown-it" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">markdown-it</a>：markdown 转换富文本解析器
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/Automattic/juice" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">juice</a>：将 CSS 类选择器转换为行内样式的工具
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/codemirror/codemirror" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">codemirror</a>：网页代码编辑器
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/ant-design/ant-design" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">ant-design</a>：React UI组件库
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/mobxjs/mobx" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">mobx</a>：状态管理库
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/highlightjs/highlight.js"
               class=" wrap external" target="_blank" rel="nofollow noreferrer">highlight.js</a>：代码高亮库
        </li>
        <li><a href="https://link.zhihu.com/?target=https%3A//github.com/mathjax/MathJax-node" class=" wrap external"
               target="_blank" rel="nofollow noreferrer">MathJax-node</a>：公式转图片库
        </li>
        <li>axios、ali-oss、qiniu-js等</li>
    </ul>
    <p>注：下文会提到上述某些开源库，开源库具体作用请参考此处。</p>
    <p>在拥有上述技术傍身之后，我向微信编辑器宣战，打响了战斗第一枪！</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic2.zhimg.com/v2-4007f08d4d2e388e91908a846e6c1a65_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="240" data-rawheight="240" class="content_image" width="240"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='240'></svg>"
             data-caption="" data-size="normal" data-rawwidth="240" data-rawheight="240" class="content_image lazy"
             width="240" data-actualsrc="https://pic2.zhimg.com/v2-4007f08d4d2e388e91908a846e6c1a65_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <h3>2.2 战斗第一枪：代码主题</h3>
    <p>微信公众号在2018年以前，是完全不支持代码块的，目前的支持也很单一，并且存在代码字体较大的问题。</p>
    <blockquote> 说来很气，微信公众号编辑器的开发者，就木有想过<b>代码块对程序员群体是多么重要么</b>？？<br></blockquote>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-8fe3359493bfde76f0246192f3d28853_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="300" data-rawheight="302" class="content_image" width="300"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='302'></svg>"
             data-caption="" data-size="normal" data-rawwidth="300" data-rawheight="302" class="content_image lazy"
             width="300" data-actualsrc="https://pic4.zhimg.com/v2-8fe3359493bfde76f0246192f3d28853_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>为此我找来了<code>highlight.js</code>代码高亮神器，帮助解决代码主题单一的问题。</p>
    <p>经过一定的筛选后，最终选定了 atom-one-dark、atom-one-light、monikai、GitHub、vs2015、xcode 和微信代码主题共 7 个代码样式供大家选择。</p>
    <p>其中微信代码主题由于其不属于<code>highlight.js</code>的归属范畴，故而其结构需要从微信公众号编辑器源码中获取，下面两张图展示了如何获取：</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic1.zhimg.com/v2-d5b05edb2f03e4856ff3c338c94e71a0_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="2524" data-rawheight="1292"
                       class="origin_image zh-lightbox-thumb" width="2524"
                       data-original="https://pic1.zhimg.com/v2-d5b05edb2f03e4856ff3c338c94e71a0_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='2524' height='1292'></svg>"
             data-caption="" data-size="normal" data-rawwidth="2524" data-rawheight="1292"
             class="origin_image zh-lightbox-thumb lazy" width="2524"
             data-original="https://pic1.zhimg.com/v2-d5b05edb2f03e4856ff3c338c94e71a0_r.jpg"
             data-actualsrc="https://pic1.zhimg.com/v2-d5b05edb2f03e4856ff3c338c94e71a0_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-6a9e5af78a53c9385e4efd4dd2a1e762_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="914" data-rawheight="870"
                       class="origin_image zh-lightbox-thumb" width="914"
                       data-original="https://pic3.zhimg.com/v2-6a9e5af78a53c9385e4efd4dd2a1e762_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='914' height='870'></svg>"
             data-caption="" data-size="normal" data-rawwidth="914" data-rawheight="870"
             class="origin_image zh-lightbox-thumb lazy" width="914"
             data-original="https://pic3.zhimg.com/v2-6a9e5af78a53c9385e4efd4dd2a1e762_r.jpg"
             data-actualsrc="https://pic3.zhimg.com/v2-6a9e5af78a53c9385e4efd4dd2a1e762_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>而 <code>highlight.js</code> 与 <code>markdown-it</code> 解析器是关联使用的，故而工具中存在 2 个 markdown 解析器，分别用于解析微信代码主题和其他代码主题，<a
            href="https://link.zhihu.com/?target=https%3A//github.com/zhning12/markdown-nice/blob/master/src/utils/helper.js%23L55-L133"
            class=" wrap external" target="_blank" rel="nofollow noreferrer">源码参考</a>。</p>
    <p>除了上述问题外，很多技术类公众号代码中会存在：<b>一行代码过长导致的多行显示问题</b>。</p>
    <p>该问题使用以下 CSS 代码即可解决：</p>
    <div class="highlight"><pre><code class="language-css"><span class="nt">pre</span> <span
            class="nt">code</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="kp">-webkit-</span><span
                class="n">box</span> <span class="cp">!important</span>
<span class="p">}</span></code></pre>
    </div>
    <p>对比效果如图所示：</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-ff7d71d32edda0d1aceb4d8f54c4e48e_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="750" data-rawheight="1334"
                       class="origin_image zh-lightbox-thumb" width="750"
                       data-original="https://pic3.zhimg.com/v2-ff7d71d32edda0d1aceb4d8f54c4e48e_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='750' height='1334'></svg>"
             data-caption="" data-size="normal" data-rawwidth="750" data-rawheight="1334"
             class="origin_image zh-lightbox-thumb lazy" width="750"
             data-original="https://pic3.zhimg.com/v2-ff7d71d32edda0d1aceb4d8f54c4e48e_r.jpg"
             data-actualsrc="https://pic3.zhimg.com/v2-ff7d71d32edda0d1aceb4d8f54c4e48e_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>从此以后使用 Markdown Nice 的同志们代码更美观啦！</p>
    <h3>2.3 战斗第二枪：图片上传</h3>
    <p>一篇好的文章怎么可以没有图片？</p>
    <p>（某些技术人员说：我的就没有）</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic2.zhimg.com/v2-314fa86aa0d20fc8ece77ad899e80e81_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="300" data-rawheight="300" class="content_image" width="300"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='300'></svg>"
             data-caption="" data-size="normal" data-rawwidth="300" data-rawheight="300" class="content_image lazy"
             width="300" data-actualsrc="https://pic2.zhimg.com/v2-314fa86aa0d20fc8ece77ad899e80e81_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <blockquote> 图片管理是每一个成熟编辑器都会遇到的问题。<br></blockquote>
    <p>Nice 宝宝最开始使用 <a href="https://link.zhihu.com/?target=https%3A//sm.ms/" class=" wrap external" target="_blank"
                       rel="nofollow noreferrer">SM.MS</a> 图床，该图床由一位大佬在运维，非常感谢！</p>
    <p>使用该图床虽然能够上传图片，但是粘贴到微信编辑器时，失败率极高（<b>想踩死微信编辑器</b>），如图所示：</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic2.zhimg.com/v2-248982688fab1a625efe15e7fde95631_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="1428" data-rawheight="738"
                       class="origin_image zh-lightbox-thumb" width="1428"
                       data-original="https://pic2.zhimg.com/v2-248982688fab1a625efe15e7fde95631_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1428' height='738'></svg>"
             data-caption="" data-size="normal" data-rawwidth="1428" data-rawheight="738"
             class="origin_image zh-lightbox-thumb lazy" width="1428"
             data-original="https://pic2.zhimg.com/v2-248982688fab1a625efe15e7fde95631_r.jpg"
             data-actualsrc="https://pic2.zhimg.com/v2-248982688fab1a625efe15e7fde95631_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>真是{喜闻乐见|hē hē hē hē}呀！</p>
    <p>为了解决上述问题，Markdown Nice 先后支持了自定义阿里云和七牛云图床，通过购买阿里云和七牛云的服务使用自建图床。</p>
    <p><b>但是！让使用者自己配置，尽管有配置文档，但是整个配置过程复杂无比，简直惨绝人寰！</b></p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-c8332323be27d4533bae41cb9260049f_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="350" data-rawheight="350" class="content_image" width="350"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='350' height='350'></svg>"
             data-caption="" data-size="normal" data-rawwidth="350" data-rawheight="350" class="content_image lazy"
             width="350" data-actualsrc="https://pic4.zhimg.com/v2-c8332323be27d4533bae41cb9260049f_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>于是，Nice 宝宝又使用自己的账号，自建图床，设定保存时间为一天，提供临时排版使用的 mdnice 图床。至此，工具中的图片上传支持情况如下：</p>
    <p>|图床|费用|有效期|失败率| |---|---|---|---| |mdnice|免费|1天|低| |SM.MS|免费|长期|高| |阿里云|<a
            href="https://link.zhihu.com/?target=https%3A//cn.aliyun.com/product/oss" class=" wrap external"
            target="_blank" rel="nofollow noreferrer">参考</a>|自定义|低| |七牛云|10G免费|自定义|低|</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-1f34dde4dc60b0ef9c1701f069fb12eb_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="1040" data-rawheight="808"
                       class="origin_image zh-lightbox-thumb" width="1040"
                       data-original="https://pic4.zhimg.com/v2-1f34dde4dc60b0ef9c1701f069fb12eb_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1040' height='808'></svg>"
             data-caption="" data-size="normal" data-rawwidth="1040" data-rawheight="808"
             class="origin_image zh-lightbox-thumb lazy" width="1040"
             data-original="https://pic4.zhimg.com/v2-1f34dde4dc60b0ef9c1701f069fb12eb_r.jpg"
             data-actualsrc="https://pic4.zhimg.com/v2-1f34dde4dc60b0ef9c1701f069fb12eb_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>这场图床的战役中，最大的难度在于需要阅读阿里云 OSS 和七牛云 KODO 的文档，并且使用其开源出来的工具包 ali-oss 和 qiniu-js 。</p>
    <p>这其中又涉及到了 FormData、file对象、base64 和 blob 之间的神奇转换，<a
            href="https://link.zhihu.com/?target=https%3A//github.com/zhning12/markdown-nice/blob/master/src/component/Dialog/ImageDialog.js"
            class=" wrap external" target="_blank" rel="nofollow noreferrer">源码参考</a>。</p>
    <p>总之，这场战斗打的不亦乐乎。</p>
    <h3>2.4 战斗第三枪：数学公式</h3>
    <p><b>微信公众号排版中，数学公式是一个噩梦！</b></p>
    <p>因为微信编辑器做了以下三件事情：</p>
    <ul>
        <li>不支持公式编辑</li>
        <li>不支持 html 和 css 生成的公式，因为字体无法导入</li>
        <li>不支持 svg，放入后提示失败</li>
    </ul>
    <blockquote> 这三件事情简直像魔鬼的步伐，把公式需求者放在光滑的地板上摩擦、摩擦....<br></blockquote>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic1.zhimg.com/v2-6d649ebf476fdb74dce667ccf6ebcaf8_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="225" data-rawheight="225" class="content_image" width="225"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='225' height='225'></svg>"
             data-caption="" data-size="normal" data-rawwidth="225" data-rawheight="225" class="content_image lazy"
             width="225" data-actualsrc="https://pic1.zhimg.com/v2-6d649ebf476fdb74dce667ccf6ebcaf8_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>目前唯一可行的方案就是将公式转换成图片，再将图片直接贴到公众号里，Nice宝宝觉得自己这个想法简直是完美！</p>
    <p>但是，怎么做呢......</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-81be23389c0353e045ce16783fc3da32_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="224" data-rawheight="225" class="content_image" width="224"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='224' height='225'></svg>"
             data-caption="" data-size="normal" data-rawwidth="224" data-rawheight="225" class="content_image lazy"
             width="224" data-actualsrc="https://pic3.zhimg.com/v2-81be23389c0353e045ce16783fc3da32_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>忽然灵机一动，想到了朋友曾经推荐的一个转换公式网站 <a href="https://link.zhihu.com/?target=https%3A//www.codecogs.com/latex/eqneditor.php"
                                    class=" wrap external" target="_blank" rel="nofollow noreferrer">codecogs</a>，这个网站能够做到将任意公式转换成png图片并给出可访问链接。
    </p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-30220c7a49370fe8b5e367721447054a_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="842" data-rawheight="778"
                       class="origin_image zh-lightbox-thumb" width="842"
                       data-original="https://pic3.zhimg.com/v2-30220c7a49370fe8b5e367721447054a_r.jpg"/></noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='842' height='778'></svg>"
             data-caption="" data-size="normal" data-rawwidth="842" data-rawheight="778"
             class="origin_image zh-lightbox-thumb lazy" width="842"
             data-original="https://pic3.zhimg.com/v2-30220c7a49370fe8b5e367721447054a_r.jpg"
             data-actualsrc="https://pic3.zhimg.com/v2-30220c7a49370fe8b5e367721447054a_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>但是由于图片稳定性，无法直接使用该链接，会存在和第二场战役一样，图片粘贴失败的情况，让人苦不堪言。</p>
    <ul>
        <li>这个问题该怎么解决呢？<b>如果能够自建公式转png图片服务就好了。</b></li>
        <li>有没有这样的开源库？<b>有！MathJax-node 就可以！</b></li>
    </ul>
    <p>于是Nice宝宝自建后台服务，封装 RESTful 接口供前端调用，实现了公式转图片的功能！经过测试，完全可以使用，粘贴后再根据排版情况调整图片大小即可。</p>
    <p>其中对于大量公式的转换，前端合理使用了异步请求，并非一个个转换而是并行执行，<b>性能上达到了10个公式也能2秒转换完毕的效果</b>，完全可用于公式排版。</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-1b063bed51bed54814d00f2e07968412_b.gif" data-caption=""
                       data-size="normal" data-rawwidth="599" data-rawheight="339"
                       data-thumbnail="https://pic3.zhimg.com/v2-1b063bed51bed54814d00f2e07968412_b.jpg"
                       class="origin_image zh-lightbox-thumb" width="599"
                       data-original="https://pic3.zhimg.com/v2-1b063bed51bed54814d00f2e07968412_r.jpg"/></noscript>
        <div class="RichText-gifPlaceholder">
            <div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif"
                                                                                                     role="presentation"
                                                                                                     src="https://pic3.zhimg.com/v2-1b063bed51bed54814d00f2e07968412_b.jpg"
                                                                                                     data-thumbnail="https://pic3.zhimg.com/v2-1b063bed51bed54814d00f2e07968412_b.jpg"
                                                                                                     data-size="normal">
                <svg width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon">
                    <g fill="none" fill-rule="evenodd">
                        <ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"></ellipse>
                        <ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"></ellipse>
                        <svg x="16" y="18.5" class="GifPlayer-icon">
                            <path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z"
                                  fill="#fff"></path>
                        </svg>
                    </g>
                </svg>
            </div>
        </div>
    </figure>
    <p class="ztext-empty-paragraph"><br></p>
    <h3>2.5 战斗第四枪：微信外链转脚注</h3>
    <p>众所周知（不知道也得知道），微信不支持外链，除了域名为<code>https://mp.weixin.qq.com/</code>的合法链接外，其他的链接出现后都会被自动删除。</p>
    <p>而添加外链的唯一官方方式就是在阅读全文处，当然，直接将链接本身放到文中或者制作二维码图片也是可以的选择。</p>
    <p><b>而 Nice 宝宝则提供了将微信外链转为脚注的方式解决该问题，是不是很优雅呢？</b></p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-73950e71b853215b5034630c1d019a9b_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="270" data-rawheight="270" class="content_image" width="270"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='270' height='270'></svg>"
             data-caption="" data-size="normal" data-rawwidth="270" data-rawheight="270" class="content_image lazy"
             width="270" data-actualsrc="https://pic4.zhimg.com/v2-73950e71b853215b5034630c1d019a9b_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>其中链接和脚注的使用区别如下：</p>
    <div class="highlight"><pre><code class="language-text">链接：[文字](链接 "文字")
脚注：[文字](脚注解释 "脚注名字")</code></pre>
    </div>
    <p>这里又涉及到了一个常见的问题，就是很多公众号作者的文章中，原来在其他平台发布时都是链接，而到这里排版时需要进行挨个修改，实在是让人头大。</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-5f749d937c73b8ed7d160a801150d76b_b.jpg" data-caption=""
                       data-size="normal" data-rawwidth="225" data-rawheight="224" class="content_image" width="225"/>
        </noscript>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='225' height='224'></svg>"
             data-caption="" data-size="normal" data-rawwidth="225" data-rawheight="224" class="content_image lazy"
             width="225" data-actualsrc="https://pic4.zhimg.com/v2-5f749d937c73b8ed7d160a801150d76b_b.jpg"></figure>
    <p class="ztext-empty-paragraph"><br></p>
    <p>于是Nice宝宝我又做了一个小改进，就是在粘贴文章的时候会自动监测是否存在外链，并提示作者是否一键转成脚注，这样就不必手工修改了，赞不赞！</p>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic3.zhimg.com/v2-5b917416fb1687eaaf97a1165cc17de6_b.gif" data-caption=""
                       data-size="normal" data-rawwidth="599" data-rawheight="339"
                       data-thumbnail="https://pic3.zhimg.com/v2-5b917416fb1687eaaf97a1165cc17de6_b.jpg"
                       class="origin_image zh-lightbox-thumb" width="599"
                       data-original="https://pic3.zhimg.com/v2-5b917416fb1687eaaf97a1165cc17de6_r.jpg"/></noscript>
        <div class="RichText-gifPlaceholder">
            <div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif"
                                                                                                     role="presentation"
                                                                                                     src="https://pic3.zhimg.com/v2-5b917416fb1687eaaf97a1165cc17de6_b.jpg"
                                                                                                     data-thumbnail="https://pic3.zhimg.com/v2-5b917416fb1687eaaf97a1165cc17de6_b.jpg"
                                                                                                     data-size="normal">
                <svg width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon">
                    <g fill="none" fill-rule="evenodd">
                        <ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"></ellipse>
                        <ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"></ellipse>
                        <svg x="16" y="18.5" class="GifPlayer-icon">
                            <path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z"
                                  fill="#fff"></path>
                        </svg>
                    </g>
                </svg>
            </div>
        </div>
    </figure>
    <p class="ztext-empty-paragraph"><br></p>
    <h3>2.6 战役总结</h3>
    <p>和微信公众号编辑器对抗，是个极其有意思的过程。除了上述提到的问题之外，还有很多的细节点需要注意，在此就不一一讨论了，感兴趣欢迎阅读源码。</p>
    <blockquote> Markdown Nice 的战斗之旅还远远没有结束，官网制作、浏览器插件、本地工具和排版纠正等功能蓄势待发。<br></blockquote>
    <h2>三、谈点和战斗无关的</h2>
    <h3>3.1 设计理念</h3>
    <p><b>大多数人而言，内容重于排版，排版重于设计。</b></p>
    <p>内容是吸引读者的核心，所以最重要。</p>
    <p>而排版与设计之间的比较，作为一个曾经的微信美术编辑，随着排版经验的增多，发现文章的效果并不在于额外的花边、点缀。</p>
    <blockquote><b>整齐、舒服、简单是硬道理!</b><br></blockquote>
    <h3>3.2 内容、排版与设计</h3>
    <p><b>设计 = 排版 + 创意</b></p>
    <hr>
    <p>因为：大多数人不会获取创意，或认为创意成本过高。</p>
    <p>所以：大多数人不做设计，富文本设计不适合单纯的内容编辑者。</p>
    <hr>
    <p>虽然：大多数人也不会排版，或认为排版成本过高。</p>
    <p>但是：<b>Markdown Nice 将用户从排版中释放出来，只关注内容本身。</b></p>
    <h3>3.3 关于开源</h3>
    <p>开源是个既简单又困难的过程：</p>
    <ul>
        <li><b>说简单是因为</b>：笔记、书单、工具、平台所有有价值的东西都可以在 GitHub 中输出，做起来很简单</li>
        <li><b>说困难是因为</b>：努力做到对别人有价值，始终坚持输出，做起来很困难</li>
    </ul>
    <p>正如上面描述的那样，做开源其实是在做一款产品，有可能是技术产品（比如 redis、ant design），也有可能是业务产品（比如 Markdown Nice），只有做好了才可能对别人产生价值。</p>
    <p>做产品的过程曲折而漫长，对照 Markdown Nice 开发过程，可以看到以下的步骤：</p>
    <ol>
        <li>要有一个 idea，并且验证其可行性和必要性，去和同类产品比较，做到心中有数</li>
        <li>抓住痛点，掌握核心价值，站在用户角度思考，多听反馈意见</li>
        <li>螺旋上升，不断迭代，产出精品</li>
        <li>最最重要一点，<b>做产品不只要写代码，还要宣传呀！！酒香也怕巷子深！！</b></li>
    </ol>
    <p>参与开源，一路走来，甚是不易，望君珍惜。</p>
    <blockquote> 最后，感谢每一位开源参与者，欢迎更多人参与到开源中来，还有好多代码等着有人来写呢！<br></blockquote>
    <p class="ztext-empty-paragraph"><br></p>
    <figure data-size="normal">
        <noscript><img src="https://pic4.zhimg.com/v2-3db6ab8d6730c6df576d47326d2a168b_b.gif" data-caption=""
                       data-size="normal" data-rawwidth="340" data-rawheight="340"
                       data-thumbnail="https://pic4.zhimg.com/v2-3db6ab8d6730c6df576d47326d2a168b_b.jpg"
                       class="content_image" width="340"/></noscript>
        <div class="RichText-gifPlaceholder">
            <div class="GifPlayer" data-size="normal" data-za-detail-view-path-module="GifItem"><img class="ztext-gif"
                                                                                                     role="presentation"
                                                                                                     src="https://pic4.zhimg.com/v2-3db6ab8d6730c6df576d47326d2a168b_b.jpg"
                                                                                                     data-thumbnail="https://pic4.zhimg.com/v2-3db6ab8d6730c6df576d47326d2a168b_b.jpg"
                                                                                                     data-size="normal">
                <svg width="60" height="60" viewBox="0 0 60 60" class="GifPlayer-icon">
                    <g fill="none" fill-rule="evenodd">
                        <ellipse fill="#000" opacity="0.45" cx="30" cy="30" rx="30" ry="30"></ellipse>
                        <ellipse stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-dasharray="4,1,4" cx="30" cy="30" rx="26" ry="26"></ellipse>
                        <svg x="16" y="18.5" class="GifPlayer-icon">
                            <path d="M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z"
                                  fill="#fff"></path>
                        </svg>
                    </g>
                </svg>
            </div>
        </div>
    </figure>
    <p><b>『讲解开源项目系列』</b>——让对开源项目感兴趣的人不再畏惧、让开源项目的发起者不再孤单。跟着我们的文章，你会发现编程的乐趣、使用和发现参与开源项目如此简单。欢迎留言联系我们、加入我们，让更多人爱上开源、贡献开源～
    </p></div>